<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         point="org.eclipse.debug.core.launchModes">
      <launchMode
            label="Run"
            mode="run">
      </launchMode>
      <launchMode
            label="Debug"
            mode="debug">
      </launchMode>
   </extension>
   <extension
         point="org.eclipse.debug.core.launchDelegates">
      <launchDelegate
            delegate="org.eclipse.efm.execution.launchconfiguration.LaunchDelegate"
            id="org.eclipse.efm.runconfiguration.launchDelegate"
            modes="sew"
            type="org.eclipse.jdt.launching.localJavaApplication">
      </launchDelegate>
   </extension>
   <extension
         point="org.eclipse.debug.core.launchConfigurationTypes">
      <launchConfigurationType
            delegate="org.eclipse.efm.execution.launchconfiguration.LaunchDelegate"
            id="org.eclipse.efm.runconfiguration.launchConfigurationType"
            modes="run,debug"
            name="Symbolic Execution Workflow">
      </launchConfigurationType>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTabGroups">
      <launchConfigurationTabGroup
            class="org.eclipse.efm.execution.launchconfiguration.LaunchConfigurationTabGroup"
            id="org.eclipse.efm.runconfiguration.launchConfigurationTabGroup.diversityApplication"
            helpContextId="org.eclipse.efm.runconfiguration.efm_runconf_tabgroup"
            type="org.eclipse.efm.runconfiguration.launchConfigurationType">
      </launchConfigurationTabGroup>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTypeImages">
      <launchConfigurationTypeImage
            configTypeID="org.eclipse.efm.runconfiguration.launchConfigurationType"
            icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/diversity_icon.png"
            id="org.eclipse.efm.runconfiguration.launchConfigurationTypeImage">
      </launchConfigurationTypeImage>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="org.eclipse.efm.runconfiguration.definition.isEnabledMenuSEW">
         <or>
            <with
                  variable="activeEditorId">
               <equals
                     value="org.eclipse.diversity.ide.xtext.favm.FAVM">
               </equals>
            </with>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate
                     operator="and">
                  <instanceof
                        value="org.eclipse.core.resources.IFile">
                  </instanceof>
                  <or>
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="sew">
                     </test>
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="favm">
                     </test>
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="gv">
                     </test>
                  </or>
               </iterate>
            </with>
         </or>
      </definition>
      <definition
            id="org.eclipse.efm.runconfiguration.definition.isEnabledCommandRunSEW">
         <or>
            <with
                  variable="activeEditorId">
               <equals
                     value="org.eclipse.diversity.ide.xtext.favm.FAVM">
               </equals>
            </with>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate
                     operator="and">
                  <instanceof
                        value="org.eclipse.core.resources.IFile">
                  </instanceof>
                  <or>
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="sew">
                     </test>
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="favm">
                     </test>
                  </or>
               </iterate>
            </with>
         </or>
      </definition>
      <definition
            id="org.eclipse.efm.runconfiguration.definition.isEnabledCommandGraphViz">
         <or>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate
                     operator="and">
                  <instanceof
                        value="org.eclipse.core.resources.IFile">
                  </instanceof>
                  <test
                        property="org.eclipse.core.resources.extension"
                        value="gv">
                  </test>
               </iterate>
            </with>
         </or>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            description="Run Symbolic Execution Workflow"
            id="org.eclipse.efm.runconfiguration.commands.category.runSEW"
            name="Run SEW">
      </category>
      <command
            categoryId="org.eclipse.efm.runconfiguration.commands.category.runSEW"
            description="Run Symbolic Execution Workflow"
            id="org.eclipse.efm.runconfiguration.command.runSEW"
            name="Run SEW">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.efm.execution.launchconfiguration.handlers.RunSewHandler"
            commandId="org.eclipse.efm.runconfiguration.command.runSEW">
         <enabledWhen>
            <reference
                  definitionId="org.eclipse.efm.runconfiguration.definition.isEnabledCommandRunSEW">
            </reference>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="org.eclipse.efm.runconfiguration.commands.category.graphviz"
            name="GraphViz">
      </category>
      <command
            categoryId="org.eclipse.efm.runconfiguration.commands.category.graphviz"
            description="Graph Visualization Tool"
            id="org.eclipse.efm.runconfiguration.command.graphviz"
            name="GraphViz">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.efm.execution.launchconfiguration.handlers.GraphVizHandler"
            commandId="org.eclipse.efm.runconfiguration.command.graphviz">
         <enabledWhen>
            <reference
                  definitionId="org.eclipse.efm.runconfiguration.definition.isEnabledCommandGraphViz">
            </reference>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.efm.runconfiguration.command.graphviz"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+7">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="org.eclipse.efm.runconfiguration.menu.main"
               label="SEW"
               mnemonic="S"
               tooltip="Symbolic Execution Workflow">
            <command
                  commandId="org.eclipse.efm.runconfiguration.command.runSEW"
                  icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/run_exc.gif"
                  id="org.eclipse.efm.runconfiguration.menu.runSEW"
                  label="Run Symbolic Execution Workflow"
                  mnemonic="S">
            </command>
            <command
                  commandId="org.eclipse.efm.runconfiguration.command.graphviz"
                  icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/graph.ico"
                  id="org.eclipse.efm.runconfiguration.menu.graphviz"
                  mnemonic="V">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="true"
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <menu
               icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/diversity_icon.png"
               id="org.eclipse.efm.runconfiguration.menu.popup.sew"
               label="Symbolic Execution Workflow">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="org.eclipse.efm.runconfiguration.definition.isEnabledMenuSEW">
               </reference>
            </visibleWhen>
            <command
                  commandId="org.eclipse.efm.runconfiguration.command.runSEW"
                  icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/run_exc.gif"
                  id="org.eclipse.efm.runconfiguration.menu.runSEW"
                  mnemonic="S">
            </command>
            <command
                  commandId="org.eclipse.efm.runconfiguration.command.graphviz"
                  icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/graph.ico"
                  id="org.eclipse.efm.runconfiguration.menu.graphviz"
                  mnemonic="V">
            </command>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            description="Symbolic Execution Workflow Tools"
            id="org.eclipse.efm.runconfiguration.category.tools"
            name="SEW Tools">
      </category>
      <command
            categoryId="org.eclipse.efm.runconfiguration.category.tools"
            defaultHandler="org.eclipse.efm.execution.launchconfiguration.handlers.RunSewToolsHandler"
            id="org.eclipse.efm.runconfiguration.command.tools"
            name="SEW Tools">
         <commandParameter
               id="org.eclipse.efm.runconfiguration.commandParameter.message"
               name="Message"
               optional="true">
         </commandParameter>
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="org.eclipse.efm.runconfiguration.toolbar.tools"
               label="SEW Tools">
            <command
                  commandId="org.eclipse.efm.runconfiguration.command.tools"
                  icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/diversity_icon.png"
                  id="org.eclipse.efm.runconfiguration.dropdowncommand.tools"
                  style="pulldown"
                  tooltip="Symbolic Execution Workflow Tools">
            </command>
         </toolbar>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.efm.runconfiguration.dropdowncommand.tools">
            <command
                  commandId="org.eclipse.efm.runconfiguration.command.runSEW"
                  icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/run_exc.gif"
                  id="org.eclipse.efm.runconfiguration.toolbars.runSEW"
                  tooltip="run Symbolic Execution Workflow">
            </command>
            <command
                  commandId="org.eclipse.efm.runconfiguration.command.graphviz"
                  icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/graph.ico"
                  id="org.eclipse.efm.runconfiguration.menu.graphviz"
                  mnemonic="V"
                  tooltip="Graph Visualization">
            </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            category="org.eclipse.efm.ui.category.views"
            class="org.eclipse.efm.execution.launchconfiguration.ui.views.SymbolicExecutionView"
            icon="platform:/plugin/org.eclipse.efm.ui/resources/icons/diversity_icon.png"
            id="org.eclipse.efm.runconfiguration.ui.views.SymbolicExecutionView"
            name="Symbex Console">
      </view>
   </extension>

</plugin>
