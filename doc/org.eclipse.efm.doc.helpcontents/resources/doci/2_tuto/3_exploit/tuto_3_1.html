<html>
<body>


<h1>Symbolic Execution and Behavior Exploration</h1>



<p>Diversity allows the exploration of all the possible behavioral paths our system can take according to the input on the sensor.</p>
<p>In the following, we'll build a graphical tree that represents this exploration. But at first, we will do the process "manually" in order to fully understand it.</p>

<h2>Principles of Exploration</h2>
<p>One of the parameters for the exploration is the number of steps. This number will dictate how far (how many transition deep) the tree must be explored.</p>

<p>For the water system, for instance for 4 steps, the different possibilities (list of transitions that may be reached) are :</p>
<ul>
<li>"detection" -> "lvlok" -> "detection" -> "lvlok"</li>
<li>"detection" -> "lvlok" -> "detection" -> "lvllow"</li>
<li>"detection" -> "lvllow/activation" -> "filling/flowing" -> "filled/desactivation"</li>
<li>"detection" -> "lvllow/activation" -> "filling/flowing" -> "filling/flowing"</li>
</ul>

<p>If we know how the system works, we can deduce the ranges of data needed to obtain those 4 behaviors (where the time corresponds to the order of the current transition) :</p>

<ul>
<li>We need "lvl > LVLMIN" at times 0 and 2 for the first one</li>
<li>We need "lvl > LVLMIN" at time 0 and "lvl < LVLMIN" at time 2 for the second one</li>
<li>We need "lvl < LVLMIN" and "LVLRECO - lvl < FLOW" at time 0 (so that one cycle of the pump is enough to refill) (and no conditions at time 2) for the third one</li>
<li>We need "lvl < LVLMIN" and "LVLRECO - lvl > FLOW" at time 0 (so that one cycle of the pump is NOT enough to refill) (and no conditions at time 2) for the last one</li>
</ul>


<h2>Configuring the automatic exploration</h2>
<p>Diversity can do what we just did, automatically and for much bigger systems, with much greater number of steps.</p>
<p>To generate an exploration tree, we must follow the steps described in the pictures below :</p>
<p>"Run Configurations..." allows to parameterize our launch of the symbolic execution engine on the XLIA model :</p>
<img src="images/runconf001.png" width=950, border="3">
<p>We create a "New launch configuration" for a "Symbolic Execution Workflow" :</p>
<img src="images/runconf002.png" width=950, border="3">
<p>The new configuration appears under the "Symbolic Execution Workflow" node :</p>
<img src="images/runconf003.png" width=950, border="3">
<p>We give a coherent name to the configuration, as well as the path to the corresponding .xlia file :</p>
<img src="images/runconf004.png" width=950, border="3">
<p>In order to print easily readable results for what follows, we check-in the "Execution Graph Phase1 Generation" and "Execution Graph Phase2 Generation" on the "Debug" tab. Those will generate the graphical trees.</p>
<img src="images/runconf005.png" width=950, border="3">
<p>We can specify the number of steps in our execution tree, on the "Common Criteria" tab :</p>
<img src="images/runconf006.png" width=950, border="3">


<h2>Results of the automatic exploration</h2>
<p>After having clicked on "Apply" and "Run", the requested files are generated within the project.</p>
<p>We can visualize the ".gv" files with "Graph Visualization" as shown below :</p>
<img src="images/exploviz001.png" width=950, border="3">
<p>Or with :</p>
<img src="images/exploviz002.png" width=950, border="3">
<p>The "phase1_execution_graph.gv" graph displays a detailed view of the possible sequences of states accessed by the state-machine as well as the conditions that are required to follow them :</p>
<img src="images/exploviz003.png" width=750, border="3">
<p>The "phase2_execution_graph.gv" graph provides a more synthetic representation :</p>
<img src="images/exploviz004.png" width=750, border="3">
<p>By acting on the number of steps, we can go further on the exploration :</p>
<img src="images/exploviz005.png" width=1150, border="3">
<p>With only 10 steps, we've already found 3 out of the 4 sequences that we've predicted :</p>
<img src="images/exploviz006.png" width=1150, border="3">
<img src="images/exploviz007.png" width=1150, border="3">
<img src="images/exploviz008.png" width=1150, border="3">
<p>The only sequence that we didn't get is :</p>
<ul>
<li>"detection" -> "lvllow/activation" -> "filling/flowing" -> "filled/desactivation"</li>
</ul>
<p>In the next part, we will use "Behavior Selection" to try to isolate this particular sequence. As we'll see, this sequence is not possible considering the variables of our system.</p>

</body>
</html>